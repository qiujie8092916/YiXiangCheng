<!--miniprogram/pages/commute/commute.wxml-->
<view>
  <!-- logo -->
  <logo-header isShowOrder="true" />

  <form bindsubmit="onsubmit" class="colct">
    <view class="container">
      <view class="tab-cotainer">
        <view
          wx:for="{{ tabs }}"
          wx:key="key"
          data-key="{{item.key}}"
          catchtap="onTabsChange"
          class="{{['tab-item', current === item.key ? 'current' : '']}}"
        >
          {{item.title}}
        </view>
      </view>
    </view>

    <!-- 标签 -->
    <swiper
      class="swiper"
      bindchange="onTabsChange"
      current="{{current === 'goHome' ? 0 : 1}}"
    >
      <!-- 享回家 -->
      <swiper-item item-id="goHome">
        <company-address disabled address="{{ companyAddress }}" />
        <view hidden="{{ activeType === 'individual' }}">
          <poi-picker
            type="destination"
            icon="chakantiezidingwei"
            is-error="{{error_field === 'sharing'}}"
            shake-invalid-animate="{{shakeInvalidAnimate.sharing}}"
            bindchoosePoi="choosePoi"
          />
        </view>
        <view hidden="{{ activeType === 'sharing' }}" class="block flex-center">
          <view class="{{['iconfont', 'icon', 'chakantiezidingwei']}}" />
          <template
            is="area-address-tmpl"
            data="{{placeholder: 'destination', errorField: error_field, activeType, animate: shakeInvalidAnimate.individual, defaultValue: pickObj, submitPick}}"
          />
        </view>
        <date-picker />
      </swiper-item>

      <!-- 享上班 -->
      <swiper-item item-id="goWork">
        <view hidden="{{ activeType === 'individual' }}">
          <poi-picker
            type="departure"
            icon="chakantiezidingwei"
            is-error="{{error_field === 'sharing'}}"
            shake-invalid-animate="{{shakeInvalidAnimate.sharing}}"
            bindchoosePoi="choosePoi"
          />
        </view>
        <view hidden="{{ activeType === 'sharing' }}" class="block flex-center">
          <view class="{{['iconfont', 'icon', 'chakantiezidingwei']}}" />
          <template
            is="area-address-tmpl"
            data="{{placeholder: 'departure', errorField: error_field, activeType, animate: shakeInvalidAnimate.individual, defaultValue: pickObj, submitPick}}"
          />
        </view>
        <company-address disabled address="{{ companyAddress }}" />
        <date-picker />
      </swiper-item>
    </swiper>

    <!-- 拼车 独享 -->
    <view class="type colct">
      <view class="type-con flex-between">
        <view
          wx:for="{{type}}"
          wx:key="key"
          class="type-it flex-center {{activeType === item.key ? 'type-active' : ''}}"
          data-type="{{item.key}}"
          catchtap="changeType"
        >
          <text>{{item.value}}</text>
          <view
            wx:if="{{activeType === item.key}}"
            class="iconfont youxiajiaogouxuan type-selected"
          />
        </view>
      </view>
    </view>

    <!-- 显示区域 -->
    <view class="screen colct">
      <text class="pric">一口价：￥{{estimate}}元</text>
      <text class="desc"
        >车型：奔驰E系列 乘坐人数：{{activeType === 'sharing' ? '1':
        '4'}}人</text
      >
    </view>

    <!-- 提交 -->
    <button class="submit rowcc" hover-class="act-btn" form-type="submit">
      去支付
    </button>
  </form>
</view>

<template name="area-address-tmpl">
  <area-address
    type="pick"
    width="450rpx"
    default-value="{{defaultValue}}"
    is-error="{{errorField === activeType}}"
    placeholder="{{placeholder}}"
    shake-invalid-animate="{{animate}}"
    bindchange="submitPick"
  />
</template>
